{"version":3,"sources":["../../../src/components/tokenizer/english-stemmer.ts"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\nconst step2List = {\n  ational: 'ate',\n  tional: 'tion',\n  enci: 'ence',\n  anci: 'ance',\n  izer: 'ize',\n  bli: 'ble',\n  alli: 'al',\n  entli: 'ent',\n  eli: 'e',\n  ousli: 'ous',\n  ization: 'ize',\n  ation: 'ate',\n  ator: 'ate',\n  alism: 'al',\n  iveness: 'ive',\n  fulness: 'ful',\n  ousness: 'ous',\n  aliti: 'al',\n  iviti: 'ive',\n  biliti: 'ble',\n  logi: 'log',\n}\n\nconst step3List = {\n  icate: 'ic',\n  ative: '',\n  alize: 'al',\n  iciti: 'ic',\n  ical: 'ic',\n  ful: '',\n  ness: '',\n}\n\n// Consonant\nconst c = '[^aeiou]'\n// Vowel\nconst v = '[aeiouy]'\n// Consonant sequence\nconst C = c + '[^aeiouy]*'\n// Vowel sequence\nconst V = v + '[aeiou]*'\n\n// [C]VC... is m>0\nconst mgr0 = '^(' + C + ')?' + V + C\n// [C]VC[V] is m=1\nconst meq1 = '^(' + C + ')?' + V + C + '(' + V + ')?$'\n// [C]VCVC... is m>1\nconst mgr1 = '^(' + C + ')?' + V + C + V + C\n// vowel in stem\nconst s_v = '^(' + C + ')?' + v\n\nexport function stemmer(w) {\n  let stem\n  let suffix\n  let re\n  let re2\n  let re3\n  let re4\n\n  if (w.length < 3) {\n    return w\n  }\n\n  const firstch = w.substring(0, 1)\n  if (firstch == 'y') {\n    w = firstch.toUpperCase() + w.substring(1)\n  }\n\n  re = /^(.+?)(ss|i)es$/\n  re2 = /^(.+?)([^s])s$/\n\n  if (re.test(w)) {\n    w = w.replace(re, '$1$2')\n  } else if (re2.test(w)) {\n    w = w.replace(re2, '$1$2')\n  }\n\n  re = /^(.+?)eed$/\n  re2 = /^(.+?)(ed|ing)$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    re = new RegExp(mgr0)\n    if (re.test(fp[1])) {\n      re = /.$/\n      w = w.replace(re, '')\n    }\n  } else if (re2.test(w)) {\n    const fp = re2.exec(w)\n    stem = fp[1]\n    re2 = new RegExp(s_v)\n    if (re2.test(stem)) {\n      w = stem\n      re2 = /(at|bl|iz)$/\n      re3 = new RegExp('([^aeiouylsz])\\\\1$')\n      re4 = new RegExp('^' + C + v + '[^aeiouwxy]$')\n      if (re2.test(w)) {\n        w = w + 'e'\n      } else if (re3.test(w)) {\n        re = /.$/\n        w = w.replace(re, '')\n      } else if (re4.test(w)) {\n        w = w + 'e'\n      }\n    }\n  }\n\n  re = /^(.+?)y$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    stem = fp?.[1]\n    re = new RegExp(s_v)\n    if (stem && re.test(stem)) {\n      w = stem + 'i'\n    }\n  }\n\n  re =\n    /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    stem = fp?.[1]\n    suffix = fp?.[2]\n    re = new RegExp(mgr0)\n    if (stem && re.test(stem)) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      w = stem + step2List[suffix]\n    }\n  }\n\n  re = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    stem = fp?.[1]\n    suffix = fp?.[2]\n    re = new RegExp(mgr0)\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    if (stem && re.test(stem)) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      w = stem + step3List[suffix]\n    }\n  }\n\n  re = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/\n  re2 = /^(.+?)(s|t)(ion)$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    stem = fp?.[1]\n    re = new RegExp(mgr1)\n    if (stem && re.test(stem)) {\n      w = stem\n    }\n  } else if (re2.test(w)) {\n    const fp = re2.exec(w)\n    stem = fp?.[1] ?? '' + fp?.[2] ?? ''\n    re2 = new RegExp(mgr1)\n    if (re2.test(stem)) {\n      w = stem\n    }\n  }\n\n  re = /^(.+?)e$/\n  if (re.test(w)) {\n    const fp = re.exec(w)\n    stem = fp?.[1]\n    re = new RegExp(mgr1)\n    re2 = new RegExp(meq1)\n    re3 = new RegExp('^' + C + v + '[^aeiouwxy]$')\n    if (stem && (re.test(stem) || (re2.test(stem) && !re3.test(stem)))) {\n      w = stem\n    }\n  }\n\n  re = /ll$/\n  re2 = new RegExp(mgr1)\n  if (re.test(w) && re2.test(w)) {\n    re = /.$/\n    w = w.replace(re, '')\n  }\n\n  if (firstch == 'y') {\n    w = firstch.toLowerCase() + w.substring(1)\n  }\n\n  return w\n}\n"],"names":["step2List","ational","tional","enci","anci","izer","bli","alli","entli","eli","ousli","ization","ation","ator","alism","iveness","fulness","ousness","aliti","iviti","biliti","logi","step3List","icate","ative","alize","iciti","ical","ful","ness","c","v","C","V","mgr0","meq1","mgr1","s_v","stemmer","w","stem","suffix","re","re2","re3","re4","length","firstch","substring","toUpperCase","test","replace","fp","exec","RegExp","toLowerCase"],"mappings":"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"}