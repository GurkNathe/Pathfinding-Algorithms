{"version":3,"sources":["../../src/components/sync-blocking-checker.ts"],"sourcesContent":["import { kInsertions, kRemovals, Orama } from '../types.js'\n\n// Web platforms don't have process. React-Native doesn't have process.emitWarning.\nconst warn =\n  globalThis.process?.emitWarning ??\n  function emitWarning(message: string, options: { code: string }) {\n    console.warn(`[WARNING] [${options.code}] ${message}`)\n  }\n\nexport function trackInsertion(orama: Orama): void {\n  if (typeof orama[kInsertions] !== 'number') {\n    queueMicrotask(() => {\n      orama[kInsertions] = undefined\n    })\n\n    orama[kInsertions] = 0\n  }\n\n  if (orama[kInsertions]! > 1000) {\n    warn(\n      \"Orama's insert operation is synchronous. Please avoid inserting a large number of document in a single operation in order not to block the main thread or, in alternative, please use insertMultiple.\",\n      { code: 'ORAMA0001' },\n    )\n\n    orama[kInsertions] = -1\n  } else if (orama[kInsertions] >= 0) {\n    orama[kInsertions]++\n  }\n}\n\nexport function trackRemoval(orama: Orama): void {\n  if (typeof orama[kRemovals] !== 'number') {\n    queueMicrotask(() => {\n      orama[kRemovals] = undefined\n    })\n\n    orama[kRemovals] = 0\n  }\n\n  if (orama[kRemovals]! > 1000) {\n    warn(\n      \"Orama's remove operation is synchronous. Please avoid removing a large number of document in a single operation in order not to block the main thread, in alternative, please use updateMultiple.\",\n      { code: 'ORAMA0002' },\n    )\n\n    orama[kRemovals] = -1\n  } else if (orama[kRemovals] >= 0) {\n    orama[kRemovals]++\n  }\n}\n"],"names":["globalThis","kInsertions","kRemovals","warn","process","emitWarning","message","options","console","code","trackInsertion","orama","queueMicrotask","undefined","trackRemoval"],"mappings":"IAIEA;AAJF,SAASC,WAAW,EAAEC,SAAS,QAAe,cAAa;AAE3D,mFAAmF;AACnF,MAAMC,OACJH,CAAAA,CAAAA,sBAAAA,WAAWI,OAAO,cAAlBJ,iCAAAA,KAAAA,IAAAA,oBAAoBK,WAAW,AAAD,KAC9B,SAASA,YAAYC,OAAe,EAAEC,OAAyB,EAAE;IAC/DC,QAAQL,IAAI,CAAC,CAAC,WAAW,EAAEI,QAAQE,IAAI,CAAC,EAAE,EAAEH,QAAQ,CAAC;AACvD;AAEF,OAAO,SAASI,eAAeC,KAAY,EAAQ;IACjD,IAAI,OAAOA,KAAK,CAACV,YAAY,KAAK,UAAU;QAC1CW,eAAe,IAAM;YACnBD,KAAK,CAACV,YAAY,GAAGY;QACvB;QAEAF,KAAK,CAACV,YAAY,GAAG;IACvB,CAAC;IAED,IAAIU,KAAK,CAACV,YAAY,GAAI,MAAM;QAC9BE,KACE,yMACA;YAAEM,MAAM;QAAY;QAGtBE,KAAK,CAACV,YAAY,GAAG,CAAC;IACxB,OAAO,IAAIU,KAAK,CAACV,YAAY,IAAI,GAAG;QAClCU,KAAK,CAACV,YAAY;IACpB,CAAC;AACH,CAAC;AAED,OAAO,SAASa,aAAaH,KAAY,EAAQ;IAC/C,IAAI,OAAOA,KAAK,CAACT,UAAU,KAAK,UAAU;QACxCU,eAAe,IAAM;YACnBD,KAAK,CAACT,UAAU,GAAGW;QACrB;QAEAF,KAAK,CAACT,UAAU,GAAG;IACrB,CAAC;IAED,IAAIS,KAAK,CAACT,UAAU,GAAI,MAAM;QAC5BC,KACE,qMACA;YAAEM,MAAM;QAAY;QAGtBE,KAAK,CAACT,UAAU,GAAG,CAAC;IACtB,OAAO,IAAIS,KAAK,CAACT,UAAU,IAAI,GAAG;QAChCS,KAAK,CAACT,UAAU;IAClB,CAAC;AACH,CAAC"}